const OPTIONS = {
  INSIGHT_URI: 'INSIGHT_URI',
  LIVENET: 'LIVENET',
  RPC_SERVER_PORT: 'RPC_SERVER_PORT',
  AXECORE_RPC_PROTOCOL: 'AXECORE_RPC_PROTOCOL',
  AXECORE_RPC_USER: 'AXECORE_RPC_USER',
  AXECORE_RPC_PASS: 'AXECORE_RPC_PASS',
  AXECORE_RPC_HOST: 'AXECORE_RPC_HOST',
  AXECORE_RPC_PORT: 'AXECORE_RPC_PORT',
  AXECORE_ZMQ_HOST: 'AXECORE_ZMQ_HOST',
  AXECORE_ZMQ_PORT: 'AXECORE_ZMQ_PORT',
  AXECORE_P2P_HOST: 'AXECORE_P2P_HOST',
  AXECORE_P2P_PORT: 'AXECORE_P2P_PORT',
  AXECORE_P2P_NETWORK: 'AXECORE_P2P_NETWORK',
  AXEDRIVE_RPC_HOST: 'AXEDRIVE_RPC_HOST',
  AXEDRIVE_RPC_PORT: 'AXEDRIVE_RPC_PORT',
  NETWORK: 'NETWORK',
  BLOOM_FILTER_PERSISTENCE_TIMEOUT: 'BLOOM_FILTER_PERSISTENCE_TIMEOUT',
};

const DEFAULT_CONFIG = {};

DEFAULT_CONFIG[OPTIONS.INSIGHT_URI] = 'http://127.0.0.1:3001/insight-api-axe';
DEFAULT_CONFIG[OPTIONS.LIVENET] = false;
DEFAULT_CONFIG[OPTIONS.RPC_SERVER_PORT] = 3000;
DEFAULT_CONFIG[OPTIONS.AXECORE_RPC_PROTOCOL] = 'http';
DEFAULT_CONFIG[OPTIONS.AXECORE_RPC_USER] = 'axerpc';
DEFAULT_CONFIG[OPTIONS.AXECORE_RPC_PASS] = 'password';
DEFAULT_CONFIG[OPTIONS.AXECORE_RPC_HOST] = '127.0.0.1';
DEFAULT_CONFIG[OPTIONS.AXECORE_RPC_PORT] = 30002;
DEFAULT_CONFIG[OPTIONS.AXECORE_ZMQ_HOST] = '127.0.0.1';
DEFAULT_CONFIG[OPTIONS.AXECORE_ZMQ_PORT] = 30003;
DEFAULT_CONFIG[OPTIONS.AXECORE_P2P_HOST] = '127.0.0.1';
DEFAULT_CONFIG[OPTIONS.AXECORE_P2P_PORT] = 30001;
DEFAULT_CONFIG[OPTIONS.AXECORE_P2P_NETWORK] = 'testnet';
DEFAULT_CONFIG[OPTIONS.AXEDRIVE_RPC_HOST] = '127.0.0.1';
DEFAULT_CONFIG[OPTIONS.AXEDRIVE_RPC_PORT] = 6000;
DEFAULT_CONFIG[OPTIONS.NETWORK] = 'testnet';
DEFAULT_CONFIG[OPTIONS.BLOOM_FILTER_PERSISTENCE_TIMEOUT] = 1000 * 60;

const envConfig = {};
Object
  .keys(OPTIONS)
  .forEach((optionName) => {
    if (process.env[optionName]) {
      envConfig[optionName] = process.env[optionName];
    }
  });

const config = Object.assign({}, DEFAULT_CONFIG, envConfig);

module.exports = {
  insightUri: config[OPTIONS.INSIGHT_URI],
  livenet: Boolean(config[OPTIONS.LIVENET]),
  server: {
    port: parseInt(config[OPTIONS.RPC_SERVER_PORT], 10),
  },
  axecore: {
    rpc: {
      protocol: config[OPTIONS.AXECORE_RPC_PROTOCOL],
      user: config[OPTIONS.AXECORE_RPC_USER],
      pass: config[OPTIONS.AXECORE_RPC_PASS],
      host: config[OPTIONS.AXECORE_RPC_HOST],
      port: parseInt(config[OPTIONS.AXECORE_RPC_PORT], 10),
    },
    zmq: {
      host: config[OPTIONS.AXECORE_ZMQ_HOST],
      port: parseInt(config[OPTIONS.AXECORE_ZMQ_PORT], 10),
    },
    p2p: {
      host: config[OPTIONS.AXECORE_P2P_HOST],
      port: parseInt(config[OPTIONS.AXECORE_P2P_PORT], 10),
      network: config[OPTIONS.AXECORE_P2P_NETWORK],
    },
  },
  network: config[OPTIONS.NETWORK].toLowerCase(),
  bloomFilterPersistenceTimeout: config[OPTIONS.BLOOM_FILTER_PERSISTENCE_TIMEOUT],
  axeDrive: {
    host: config[OPTIONS.AXEDRIVE_RPC_HOST],
    port: parseInt(config[OPTIONS.AXEDRIVE_RPC_PORT], 10),
  },
};
